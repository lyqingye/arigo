package arigo

import (
	"encoding/json"
	"github.com/stretchr/testify/assert"
	"testing"
)

func TestOptionFormat(t *testing.T) {
	data := []byte(`
{"allow-overwrite":"false","allow-piece-length-change":"true","always-resume":"false","async-dns":"true","auto-file-renaming":"true","auto-save-interval":"20","bt-detach-seed-only":"true","bt-enable-hook-after-hash-check":"true","bt-enable-lpd":"true","bt-force-encryption":"true","bt-hash-check-seed":"true","bt-load-saved-metadata":"true","bt-max-open-files":"100","bt-max-peers":"128","bt-metadata-only":"false","bt-min-crypto-level":"plain","bt-prioritize-piece":"head=32M,tail=32M","bt-remove-unselected-file":"true","bt-request-peer-speed-limit":"10485760","bt-require-crypto":"false","bt-save-metadata":"true","bt-seed-unverified":"false","bt-stop-timeout":"0","bt-tracker":"http:\/\/1337.abcvg.info:80\/announce,http:\/\/207.241.226.111:6969\/announce,http:\/\/207.241.231.226:6969\/announce,http:\/\/[2001:1b10:1000:8101:0:242:ac11:2]:6969\/announce,http:\/\/[2a04:ac00:1:3dd8::1:2710]:2710\/announce,http:\/\/bt.endpot.com:80\/announce,http:\/\/bt.okmp3.ru:2710\/announce,http:\/\/chouchou.top:8080\/announce,http:\/\/fe.dealclub.de:6969\/announce,http:\/\/montreal.nyap2p.com:8080\/announce,http:\/\/nyaa.tracker.wf:7777\/announce,http:\/\/open.acgnxtracker.com:80\/announce,http:\/\/p2p.0g.cx:6969\/announce,http:\/\/retracker.hotplug.ru:2710\/announce,http:\/\/share.camoe.cn:8080\/announce,http:\/\/t.acg.rip:6699\/announce,http:\/\/t.nyaatracker.com:80\/announce,http:\/\/torrentsmd.com:8080\/announce,http:\/\/torrenttracker.nwc.acsalaska.net:6969\/announce,http:\/\/tr.cili001.com:8070\/announce,http:\/\/tracker.birkenwald.de:6969\/announce,http:\/\/tracker.bt4g.com:2095\/announce,http:\/\/tracker.edkj.club:6969\/announce,http:\/\/tracker.files.fm:6969\/announce,http:\/\/tracker.gbitt.info:80\/announce,http:\/\/tracker.ipv6tracker.ru:80\/announce,http:\/\/tracker.k.vu:6969\/announce,http:\/\/tracker.mywaifu.best:6969\/announce,http:\/\/tracker.opentrackr.org:1337\/announce,http:\/\/tracker.qu.ax:6969\/announce,http:\/\/tracker.renfei.net:8080\/announce,http:\/\/tracker.swateam.org.uk:2710\/announce,http:\/\/v6-tracker.0g.cx:6969\/announce,http:\/\/vps02.net.orel.ru:80\/announce,http:\/\/wepzone.net:6969\/announce,http:\/\/www.all4nothin.net:80\/announce.php,http:\/\/www.peckservers.com:9000\/announce,http:\/\/www.wareztorrent.com:80\/announce,https:\/\/1337.abcvg.info:443\/announce,https:\/\/opentracker.i2p.rocks:443\/announce,https:\/\/t1.hloli.org:443\/announce,https:\/\/tr.burnabyhighstar.com:443\/announce,https:\/\/tr.ready4.icu:443\/announce,https:\/\/tracker.foreverpirates.co:443\/announce,https:\/\/tracker.gbitt.info:443\/announce,https:\/\/tracker.imgoingto.icu:443\/announce,https:\/\/tracker.ipfsscan.io:443\/announce,https:\/\/tracker.jiesen.life:8443\/announce,https:\/\/tracker.kuroy.me:443\/announce,https:\/\/tracker.lilithraws.cf:443\/announce,https:\/\/tracker.lilithraws.org:443\/announce,https:\/\/tracker.loligirl.cn:443\/announce,https:\/\/tracker.moeblog.cn:443\/announce,https:\/\/tracker.tamersunion.org:443\/announce,https:\/\/tracker1.520.jp:443\/announce,udp:\/\/184.105.151.166:6969\/announce,udp:\/\/207.241.226.111:6969\/announce,udp:\/\/207.241.231.226:6969\/announce,udp:\/\/52.58.128.163:6969\/announce,udp:\/\/6ahddutb1ucc3cp.ru:6969\/announce,udp:\/\/9.rarbg.com:2810\/announce,udp:\/\/91.216.110.52:451\/announce,udp:\/\/[2001:1b10:1000:8101:0:242:ac11:2]:6969\/announce,udp:\/\/[2001:470:1:189:0:1:2:3]:6969\/announce,udp:\/\/[2a03:7220:8083:cd00::1]:451\/announce,udp:\/\/[2a04:ac00:1:3dd8::1:2710]:2710\/announce,udp:\/\/[2a0f:e586:f:f::81]:6969\/announce,udp:\/\/aarsen.me:6969\/announce,udp:\/\/acxx.de:6969\/announce,udp:\/\/aegir.sexy:6969\/announce,udp:\/\/astrr.ru:6969\/announce,udp:\/\/black-bird.ynh.fr:6969\/announce,udp:\/\/boysbitte.be:6969\/announce,udp:\/\/bt.ktrackers.com:6666\/announce,udp:\/\/bt1.archive.org:6969\/announce,udp:\/\/bt2.archive.org:6969\/announce,udp:\/\/chouchou.top:8080\/announce,udp:\/\/concen.org:6969\/announce,udp:\/\/epider.me:6969\/announce,udp:\/\/exodus.desync.com:6969\/announce,udp:\/\/fe.dealclub.de:6969\/announce,udp:\/\/fh2.cmp-gaming.com:6969\/announce,udp:\/\/htz3.noho.st:6969\/announce,udp:\/\/inferno.demonoid.is:3391\/announce,udp:\/\/ipv6.fuuuuuck.com:6969\/announce,udp:\/\/ipv6.tracker.monitorit4.me:6969\/announce,udp:\/\/laze.cc:6969\/announce,udp:\/\/linfan.moe:6969\/announce,udp:\/\/mail.artixlinux.org:6969\/announce,udp:\/\/moonburrow.club:6969\/announce,udp:\/\/movies.zsw.ca:6969\/announce,udp:\/\/new-line.net:6969\/announce,udp:\/\/oh.fuuuuuck.com:6969\/announce,udp:\/\/open.demonii.com:1337\/announce,udp:\/\/open.dstud.io:6969\/announce,udp:\/\/open.stealth.si:80\/announce,udp:\/\/open.tracker.ink:6969\/announce,udp:\/\/opentor.org:2710\/announce,udp:\/\/opentracker.i2p.rocks:6969\/announce,udp:\/\/opentracker.io:6969\/announce,udp:\/\/p4p.arenabg.com:1337\/announce,udp:\/\/private.anonseed.com:6969\/announce,udp:\/\/psyco.fr:6969\/announce,udp:\/\/public.publictracker.xyz:6969\/announce,udp:\/\/rep-art.ynh.fr:6969\/announce,udp:\/\/retracker.hotplug.ru:2710\/announce,udp:\/\/retracker.lanta-net.ru:2710\/announce,udp:\/\/retracker01-msk-virt.corbina.net:80\/announce,udp:\/\/run.publictracker.xyz:6969\/announce,udp:\/\/ryjer.com:6969\/announce,udp:\/\/sanincode.com:6969\/announce,udp:\/\/static.54.161.216.95.clients.your-server.de:6969\/announce,udp:\/\/t.133335.xyz:6969\/announce,udp:\/\/tamas3.ynh.fr:6969\/announce,udp:\/\/thagoat.rocks:6969\/announce,udp:\/\/thinking.duckdns.org:6969\/announce,udp:\/\/thouvenin.cloud:6969\/announce,udp:\/\/torrents.artixlinux.org:6969\/announce,udp:\/\/tr.bangumi.moe:6969\/announce,udp:\/\/tr.cili001.com:8070\/announce,udp:\/\/tracker-udp.gbitt.info:80\/announce,udp:\/\/tracker.4.babico.name.tr:3131\/announce,udp:\/\/tracker.altrosky.nl:6969\/announce,udp:\/\/tracker.artixlinux.org:6969\/announce,udp:\/\/tracker.auctor.tv:6969\/announce,udp:\/\/tracker.birkenwald.de:6969\/announce,udp:\/\/tracker.bitsearch.to:1337\/announce,udp:\/\/tracker.bittor.pw:1337\/announce,udp:\/\/tracker.ccp.ovh:6969\/announce,udp:\/\/tracker.cubonegro.lol:6969\/announce,udp:\/\/tracker.cyberia.is:6969\/announce,udp:\/\/tracker.dler.com:6969\/announce,udp:\/\/tracker.dler.org:6969\/announce,udp:\/\/tracker.farted.net:6969\/announce,udp:\/\/tracker.filemail.com:6969\/announce,udp:\/\/tracker.jonaslsa.com:6969\/announce,udp:\/\/tracker.joybomb.tw:6969\/announce,udp:\/\/tracker.leech.ie:1337\/announce,udp:\/\/tracker.moeking.me:6969\/announce,udp:\/\/tracker.monitorit4.me:6969\/announce,udp:\/\/tracker.openbittorrent.com:6969\/announce,udp:\/\/tracker.opentrackr.org:1337\/announce,udp:\/\/tracker.pimpmyworld.to:6969\/announce,udp:\/\/tracker.qu.ax:6969\/announce,udp:\/\/tracker.skyts.net:6969\/announce,udp:\/\/tracker.srv00.com:6969\/announce,udp:\/\/tracker.swateam.org.uk:2710\/announce,udp:\/\/tracker.theoks.net:6969\/announce,udp:\/\/tracker.tiny-vps.com:6969\/announce,udp:\/\/tracker.torrent.eu.org:451\/announce,udp:\/\/tracker.trojangogogo.site:8080\/announce,udp:\/\/tracker1.bt.moack.co.kr:80\/announce,udp:\/\/tracker1.myporn.club:9337\/announce,udp:\/\/tracker2.dler.com:80\/announce,udp:\/\/tracker2.dler.org:80\/announce,udp:\/\/trackerb.jonaslsa.com:6969\/announce,udp:\/\/u4.trakx.crim.ist:1337\/announce,udp:\/\/u6.trakx.crim.ist:1337\/announce,udp:\/\/uploads.gamecoast.net:6969\/announce,udp:\/\/v1046920.hosted-by-vdsina.ru:6969\/announce,udp:\/\/v2.iperson.xyz:6969\/announce,udp:\/\/wepzone.net:6969\/announce,udp:\/\/www.torrent.eu.org:451\/announce,udp:\/\/zecircle.xyz:6969\/announce,ws:\/\/hub.bugout.link:80\/announce,wss:\/\/tracker.openwebtorrent.com:443\/announce","bt-tracker-connect-timeout":"10","bt-tracker-interval":"0","bt-tracker-timeout":"10","ca-certificate":"\/etc\/ssl\/certs\/ca-certificates.crt","check-certificate":"true","check-integrity":"false","conditional-get":"false","conf-path":"\/config\/aria2.conf","connect-timeout":"10","console-log-level":"notice","content-disposition-default-utf8":"true","continue":"true","daemon":"false","deferred-input":"false","dht-entry-point":"dht.transmissionbt.com:6881","dht-entry-point6":"dht.transmissionbt.com:6881","dht-file-path":"\/config\/dht.dat","dht-file-path6":"\/config\/dht6.dat","dht-listen-port":"6888","dht-message-timeout":"10","dir":"\/downloads\/test","disable-ipv6":"true","disk-cache":"67108864","download-result":"default","dry-run":"false","dscp":"0","enable-color":"true","enable-dht":"true","enable-dht6":"false","enable-http-keep-alive":"true","enable-http-pipelining":"false","enable-mmap":"false","enable-peer-exchange":"true","enable-rpc":"true","event-poll":"epoll","file-allocation":"falloc","follow-metalink":"true","follow-torrent":"true","force-save":"false","ftp-pasv":"true","ftp-reuse-connection":"true","ftp-type":"binary","hash-check-only":"false","help":"#basic","http-accept-gzip":"true","http-auth-challenge":"false","http-no-cache":"false","http-want-digest":"false","human-readable":"true","keep-unfinished-download-result":"true","listen-port":"6888","log-level":"debug","lowest-speed-limit":"0","max-concurrent-downloads":"5","max-connection-per-server":"32","max-download-limit":"0","max-download-result":"1000","max-file-not-found":"10","max-mmap-limit":"9223372036854775807","max-overall-download-limit":"0","max-overall-upload-limit":"2097152","max-resume-failure-tries":"0","max-tries":"0","max-upload-limit":"0","metalink-enable-unique-protocol":"true","metalink-preferred-protocol":"none","min-split-size":"4194304","min-tls-version":"TLSv1.2","netrc-path":"\/root\/.netrc","no-conf":"false","no-file-allocation-limit":"67108864","no-netrc":"true","on-download-complete":"\/config\/script\/clean.sh","on-download-stop":"\/config\/script\/delete.sh","optimize-concurrent-downloads":"false","parameterized-uri":"false","pause-metadata":"false","peer-agent":"Deluge 1.3.15","peer-id-prefix":"-DE13F0-","piece-length":"1048576","proxy-method":"get","quiet":"false","realtime-chunk-checksum":"true","remote-time":"true","remove-control-file":"false","retry-on-400":"true","retry-on-403":"true","retry-on-406":"true","retry-on-unknown":"true","retry-wait":"10","reuse-uri":"false","rlimit-nofile":"1024","rpc-allow-origin-all":"true","rpc-listen-all":"true","rpc-listen-port":"6800","rpc-max-request-size":"10485760","rpc-save-upload-metadata":"true","rpc-secure":"false","save-not-found":"true","save-session":"\/config\/aria2.session","save-session-interval":"1","seed-ratio":"1.0","seed-time":"0","server-stat-timeout":"86400","show-console-readout":"true","show-files":"false","socket-recv-buffer-size":"0","split":"64","stderr":"false","stop":"0","stream-piece-selector":"default","summary-interval":"0","timeout":"10","truncate-console-readout":"true","uri-selector":"feedback","use-head":"false","user-agent":"Mozilla\/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/93.0.4577.63 Safari\/537.36 Edg\/93.0.961.47"}
`)

	var options Options
	assert.NoError(t, json.Unmarshal(data, &options), "Couldn't unmarshal JSON")
}
